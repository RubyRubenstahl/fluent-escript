
const safeEval = require('safe-eval');
const line = `[0] 12/04/19 17:17:14: QLINFO: {[0] 12/04/19 17:17:14: name: "Default Show French Theme", [0] 12/04/19 17:17:14: playing: false, [0] 12/04/19 17:17:14: currentCueName: "", [0] 12/04/19 17:17:14: cueCount: 42, [0] 12/04/19 17:17:14: currentCue: -1, [0] 12/04/19 17:17:14: level: 3015, [0] 12/04/19 17:17:14: playWhileRunning: 2, [0] 12/04/19 17:17:14: speedMaster: 0, [0] 12/04/19 17:17:14: fxSpeedMaster: 0, [0] 12/04/19 17:17:14: extraSubMaster: 0, [0] 12/04/19 17:17:14: releaseTime: 0, [0] 12/04/19 17:17:14: autoReleaseOnEnd: 0, [0] 12/04/19 17:17:14: useHtp: 1, [0] 12/04/19 17:17:14: smooth: 0, [0] 12/04/19 17:17:14: priority: 3, [0] 12/04/19 17:17:14: trackingMode: 1, [0] 12/04/19 17:17:14: trackingNotInJumps: 0, [0] 12/04/19 17:17:14: mutualExcludeGroup: 1, [0] 12/04/19 17:17:14: protectedGroup: 0, [0] 12/04/19 17:17:14: chaserType: 0, [0] 12/04/19 17:17:14: chaserSpeed: 0, [0] 12/04/19 17:17:14: chaserCrossfade: 0 [0] 12/04/19 17:17:14: }
[0] 12/04/19 17:17:14:  {[0] 12/04/19 17:17:14: name: "golden hue", [0] 12/04/19 17:17:14: playing: false, [0] 12/04/19 17:17:14: currentCueName: "", [0] 12/04/19 17:17:14: cueCount: 1, [0] 12/04/19 17:17:14: currentCue: -1, [0] 12/04/19 17:17:14: level: 4096, [0] 12/04/19 17:17:14: playWhileRunning: 0, [0] 12/04/19 17:17:14: speedMaster: 0, [0] 12/04/19 17:17:14: fxSpeedMaster: 0, [0] 12/04/19 17:17:14: extraSubMaster: 0, [0] 12/04/19 17:17:14: releaseTime: 3000, [0] 12/04/19 17:17:14: autoReleaseOnEnd: 0, [0] 12/04/19 17:17:14: useHtp: 1, [0] 12/04/19 17:17:14: smooth: 0, [0] 12/04/19 17:17:14: priority: 3, [0] 12/04/19 17:17:14: trackingMode: 1, [0] 12/04/19 17:17:14: trackingNotInJumps: 0, [0] 12/04/19 17:17:14: mutualExcludeGroup: 1, [0] 12/04/19 17:17:14: protectedGroup: 0, [0] 12/04/19 17:17:14: chaserType: 0, [0] 12/04/19 17:17:14: chaserSpeed: 0, [0] 12/04/19 17:17:14: chaserCrossfade: 0 [0] 12/04/19 17:17:14: }
[0] 12/04/19 17:17:14:  {[0] 12/04/19 17:17:14: name: "Minimal Sparkle", [0] 12/04/19 17:17:14: playing: false, [0] 12/04/19 17:17:14: currentCueName: "", [0] 12/04/19 17:17:14: cueCount: 1, [0] 12/04/19 17:17:14: currentCue: -1, [0] 12/04/19 17:17:14: level: 4096, [0] 12/04/19 17:17:14: playWhileRunning: 0, [0] 12/04/19 17:17:14: speedMaster: 0, [0] 12/04/19 17:17:14: fxSpeedMaster: 2, [0] 12/04/19 17:17:14: extraSubMaster: 0, [0] 12/04/19 17:17:14: releaseTime: 1000, [0] 12/04/19 17:17:14: autoReleaseOnEnd: 0, [0] 12/04/19 17:17:14: useHtp: 1, [0] 12/04/19 17:17:14: smooth: 0, [0] 12/04/19 17:17:14: priority: 3, [0] 12/04/19 17:17:14: trackingMode: 1, [0] 12/04/19 17:17:14: trackingNotInJumps: 0, [0] 12/04/19 17:17:14: mutualExcludeGroup: 0, [0] 12/04/19 17:17:14: protectedGroup: 0, [0] 12/04/19 17:17:14: chaserType: 0, [0] 12/04/19 17:17:14: chaserSpeed: 0, [0] 12/04/19 17:17:14: chaserCrossfade: 0 [0] 12/04/19 17:17:14: }
[0] 12/04/19 17:17:14:  {[0] 12/04/19 17:17:14: name: "Easter Theme", [0] 12/04/19 17:17:14: playing: false, [0] 12/04/19 17:17:14: currentCueName: "", [0] 12/04/19 17:17:14: cueCount: 42, [0] 12/04/19 17:17:14: currentCue: -1, [0] 12/04/19 17:17:14: level: 4096, [0] 12/04/19 17:17:14: playWhileRunning: 0, [0] 12/04/19 17:17:14: speedMaster: 0, [0] 12/04/19 17:17:14: fxSpeedMaster: 0, [0] 12/04/19 17:17:14: extraSubMaster: 0, [0] 12/04/19 17:17:14: releaseTime: 3000, [0] 12/04/19 17:17:14: autoReleaseOnEnd: 0, [0] 12/04/19 17:17:14: useHtp: 1, [0] 12/04/19 17:17:14: smooth: 0, [0] 12/04/19 17:17:14: priority: 3, [0] 12/04/19 17:17:14: trackingMode: 1, [0] 12/04/19 17:17:14: trackingNotInJumps: 0, [0] 12/04/19 17:17:14: mutualExcludeGroup: 1, [0] 12/04/19 17:17:14: protectedGroup: 0, [0] 12/04/19 17:17:14: chaserType: 0, [0] 12/04/19 17:17:14: chaserSpeed: 0, [0] 12/04/19 17:17:14: chaserCrossfade: 0 [0] 12/04/19 17:17:14: }
[0] 12/04/19 17:17:14:  {[0] 12/04/19 17:17:14: name: "French Flag Static", [0] 12/04/19 17:17:14: playing: true, [0] 12/04/19 17:17:14: currentCueName: "B W R Outside in delay [K] ", [0] 12/04/19 17:17:14: cueCount: 1, [0] 12/04/19 17:17:14: currentCue: 0, [0] 12/04/19 17:17:14: level: 4096, [0] 12/04/19 17:17:14: playWhileRunning: 0, [0] 12/04/19 17:17:14: speedMaster: 0, [0] 12/04/19 17:17:14: fxSpeedMaster: 0, [0] 12/04/19 17:17:14: extraSubMaster: 0, [0] 12/04/19 17:17:14: releaseTime: 1000, [0] 12/04/19 17:17:14: autoReleaseOnEnd: 0, [0] 12/04/19 17:17:14: useHtp: 1, [0] 12/04/19 17:17:14: smooth: 0, [0] 12/04/19 17:17:14: priority: 5, [0] 12/04/19 17:17:14: trackingMode: 1, [0] 12/04/19 17:17:14: trackingNotInJumps: 0, [0] 12/04/19 17:17:14: mutualExcludeGroup: 0, [0] 12/04/19 17:17:14: protectedGroup: 0, [0] 12/04/19 17:17:14: chaserType: 0, [0] 12/04/19 17:17:14: chaserSpeed: 0, [0] 12/04/19 17:17:14: chaserCrossfade: 0 [0] 12/04/19 17:17:14: }
`

// This strips timestamps  intersspersed within a log line due to the way
// programmer outputs logs. 
const stripTimestamps = text => {
  const timestampRegex = /\[\d+] \d+\/\d+\/\d+ \d+:\d+:\d+: /g;
  return text.replace(timestampRegex, "");
};


// Use safe eval to convert a string representing a javascript object to an
// actual javascript object. 
const parseObjectString = text => safeEval(stripTimestamps(text));


console.log(stripTimestamps(line).split('\n').map(console.log));

const x =
  {name: `Minimal Sparkle`, index: 2, playing: false, currentCueName: ``, cueCount: 1, currentCue: -1, level: 4096, playWhileRunning: 0, speedMaster: 0, fxSpeedMaster: 2, extraSubMaster: 0, releaseTime: 1000, autoReleaseOnEnd: 0, useHtp: 1, smooth: 0, priority: 3, trackingMode: 1, trackingNotInJumps: 0, mutualExcludeGroup: 0, protectedGroup: 0, chaserType: 0, chaserSpeed: 0, chaserCrossfade: 0 cues: [{name: `slow sparkle `, inPathType: 0, inFadeTime: 3000, inDelayTime: 0, inDelayMode: 0, inGrouping: 0, outPathType: 0, outFadeTime: 0, outDelayTime: 0, outDelayMode: 0, outGrouping: 0, loopRepeatCount: 0, loopCheckEnd: 0, mode: `manual`, },],};